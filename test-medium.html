<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Test Medium JDR-BAB</title>
    
    <!-- CSS complet -->
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/utilities.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/editor.css">
    <link rel="stylesheet" href="css/scroll-optimizations.css">
</head>
<body class="dev-off">

<div id="app-loading" class="loading-screen">
    <div class="loading-content">
        <h2>JDR-BAB Test Medium</h2>
        <p>Test de chargement progressif...</p>
        <div id="test-output" style="max-height: 400px; overflow-y: auto; text-align: left;"></div>
    </div>
</div>

<script>
function log(message) {
    const output = document.getElementById('test-output');
    output.innerHTML += '<p style="margin: 2px 0; font-size: 12px;">' + message + '</p>';
    console.log(message);
    output.scrollTop = output.scrollHeight;
}

log('🚀 Test medium - chargement progressif...');

window.onerror = function(msg, url, line, col, error) {
    log('❌ ERREUR GLOBALE: ' + msg + ' (ligne ' + line + ')');
    return false;
};
</script>

<!-- Configuration et classes de base -->
<script src="js/config/constants.js"></script>
<script>log('✅ constants.js');</script>

<script src="js/config/contentTypes.js"></script>
<script>log('✅ contentTypes.js');</script>

<script src="js/core/EventBus.js"></script>
<script>log('✅ EventBus.js');</script>

<script src="js/core/BaseEntity.js"></script>
<script>log('✅ BaseEntity.js');</script>

<script src="js/core/UnifiedEditor.js"></script>
<script>log('✅ UnifiedEditor.js');</script>

<script src="js/factories/ContentFactory.js"></script>
<script>log('✅ ContentFactory.js');</script>

<!-- Builders -->
<script src="js/builders/CardBuilder.js"></script>
<script>log('✅ CardBuilder.js');</script>

<script src="js/builders/PageBuilder.js"></script>
<script>log('✅ PageBuilder.js');</script>

<!-- Modules principaux -->
<script src="js/core.js"></script>
<script>log('✅ core.js');</script>

<script src="js/utils.js"></script>
<script>log('✅ utils.js');</script>

<script src="js/utils/device-detection.js"></script>
<script>log('✅ device-detection.js');</script>

<script src="js/modules/images.js"></script>
<script>log('✅ images.js');</script>

<script src="js/modules/audio.js"></script>
<script>log('✅ audio.js');</script>

<!-- Features -->
<script src="js/features/SpellFilter.js"></script>
<script>log('✅ SpellFilter.js');</script>

<script src="js/features/TablesTresorsManager.js"></script>
<script>log('✅ TablesTresorsManager.js');</script>

<script src="js/features/FavorisManager.js"></script>
<script>log('✅ FavorisManager.js');</script>

<script src="js/features/FavorisRenderer.js"></script>
<script>log('✅ FavorisRenderer.js');</script>

<script src="js/features/ScrollOptimizer.js"></script>
<script>log('✅ ScrollOptimizer.js');</script>

<!-- Router et renderer -->
<script src="js/router.js"></script>
<script>log('✅ router.js');</script>

<script src="js/renderer.js"></script>
<script>log('✅ renderer.js');</script>

<script src="js/editor.js"></script>
<script>log('✅ editor.js');</script>

<script src="js/storage.js"></script>
<script>log('✅ storage.js');</script>

<script>
log('🎯 Tous les modules principaux chargés !');
log('🔍 Test de l\'application...');

try {
    if (window.JdrApp) {
        log('✅ JdrApp disponible');
    } else {
        log('❌ JdrApp non disponible');
    }
    
    if (window.PageBuilder) {
        log('✅ PageBuilder disponible');
    } else {
        log('❌ PageBuilder non disponible');
    }
    
    if (window.CardBuilder) {
        log('✅ CardBuilder disponible');
    } else {
        log('❌ CardBuilder non disponible');
    }
    
} catch (error) {
    log('❌ Erreur lors du test: ' + error.message);
}

log('🏁 Test medium terminé');
</script>

</body>
</html>