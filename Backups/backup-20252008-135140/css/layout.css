/* — Layout — */
.shell{display:grid;grid-template-rows:1fr auto;min-height:100svh}

.page{position:relative;min-height:100vh;padding-left:318px;padding-right:18px;padding-top:18px;padding-bottom:18px}

/* Centrer le contenu principal dans l'espace disponible */
#views{max-width:1200px;margin:0 auto}
@media (max-width: 980px){ .page{padding-left:12px;padding-right:12px} }

.sidebar{position:fixed;top:0;left:0;width:300px;height:100vh;overflow-y:auto;overflow-x:hidden;z-index:100;background:var(--paper)}
@media (max-width: 980px){ .sidebar{position:relative;width:100%;height:auto;background:transparent} }
.panel{background:var(--card);border:2px solid var(--rule);border-radius:16px;box-shadow:var(--card-shadow);padding:14px;
       position:relative; overflow:hidden;margin:12px}
.toc{max-height:calc(100vh - 150px);overflow-y:auto;overflow-x:hidden}
.panel::before{content:''; position:absolute; top:0; left:0; right:0; height:2px; 
               background:linear-gradient(90deg, transparent, var(--gold), transparent); opacity:.4}

.toc h4{margin:6px 8px;color:var(--paper-muted);text-transform:uppercase;font-size:12px;letter-spacing:.12em}
.toc a{display:flex;gap:8px;padding:8px;border-radius:10px;color:inherit;border:1px solid transparent;
       transition:all .3s cubic-bezier(0.4, 0, 0.2, 1); position:relative; overflow:hidden}
.toc a::before{content:''; position:absolute; top:0; left:-100%; width:100%; height:100%;
               background:linear-gradient(90deg, transparent, rgba(212,175,55,.15), transparent);
               transition:left .5s ease; z-index:0}
.toc a:hover{transform:translateX(4px); background:rgba(212,175,55,.08); border-color:rgba(139,69,19,.3);
             box-shadow:0 4px 12px rgba(139,69,19,.15), inset 0 1px 2px rgba(212,175,55,.2)}
.toc a:hover::before{left:100%}
.toc a > *{position:relative; z-index:1}
.toc a.active{background:linear-gradient(135deg, rgba(212,175,55,.12), rgba(139,69,19,.08)); 
              border-color:var(--bronze); box-shadow:inset 0 1px 3px rgba(212,175,55,.2);
              transform:translateX(2px)}
.toc-category{margin:0}
.toc-category > a{position:relative; cursor:pointer}
.toc-category > a::after{content:'▼'; position:absolute; right:8px; top:50%; transform:translateY(-50%); 
                         font-size:10px; transition:transform .3s ease; color:var(--bronze)}
.toc-category.collapsed > a::after{transform:translateY(-50%) rotate(-90deg)}
.toc-sub{margin-left:24px;border-left:2px solid var(--rule);padding-left:8px; 
         overflow:hidden; transition:all .3s ease}
.toc-category.collapsed .toc-sub{max-height:0; opacity:0; padding-top:0; padding-bottom:0; margin-top:0; margin-bottom:0}
.toc-category:not(.collapsed) .toc-sub{max-height:500px; opacity:1}
.toc-sub a{font-size:14px;padding:6px 8px; margin-left:4px}
.toc-sub a:hover{transform:translateX(6px); margin-left:0}

/* Outils latéraux */
.tools{display:flex;gap:var(--space-md);flex-wrap:wrap;margin:var(--space-md) 0}

/* Article and section layout */
article{display:none}
article.active{display:block}
section{background:var(--card);border:1px solid var(--rule);border-radius:14px;box-shadow:var(--shadow);padding:18px;margin:0 0 14px}

/* Footer */
footer{padding:24px;text-align:center;color:var(--paper-muted)}

/* Print styles */
@media print{ 
  .sidebar, .tools{display:none} 
  .page{grid-template-columns:1fr;padding:0} 
  section{break-inside:avoid;box-shadow:none} 
}

/* Responsive */
@media (max-width: 768px) {
  .illus .thumb { width: 100%; max-width: 300px; height: auto; }
}